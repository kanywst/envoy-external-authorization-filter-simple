<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1150px" preserveAspectRatio="none" style="width:753px;height:1150px;background:#F7F7FF;" version="1.1" viewBox="0 0 753 1150" width="753px" zoomAndPan="magnify"><defs/><g><rect fill="#F7F7FF" height="1150" style="stroke:none;stroke-width:1.0;" width="753" x="0" y="0"/><text fill="#000000" font-family="Arial" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="329" x="205" y="23.1318">Envoy + OPA Authorization PoC Architecture &#128737;&#65039;</text><!--cluster KubeCluster--><g id="cluster_KubeCluster"><rect fill="none" height="1100.54" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.0;" width="740" x="7" y="44.0986"/><path d="M149,44.0986 L149,53.1973 L139,63.1973 L7,63.1973 " fill="none" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="Arial" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="132" x="10" y="58.2305">Kubernetes Cluster</text></g><!--cluster EnvoyPodNode--><g id="cluster_EnvoyPodNode"><polygon fill="#DDEEFF" points="31,262.2886,41,252.2886,446,252.2886,446,794.5386,436,804.5386,31,804.5386,31,262.2886" style="stroke:#4477AA;stroke-width:1.0;"/><line style="stroke:#4477AA;stroke-width:1.0;" x1="436" x2="446" y1="262.2886" y2="252.2886"/><line style="stroke:#4477AA;stroke-width:1.0;" x1="31" x2="436" y1="262.2886" y2="262.2886"/><line style="stroke:#4477AA;stroke-width:1.0;" x1="436" x2="436" y1="262.2886" y2="804.5386"/><text fill="#000000" font-family="Arial" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="74" x="197.5" y="278.4205">Envoy Pod</text></g><!--cluster Envoy--><g id="cluster_Envoy"><rect fill="#FFFFFF" height="446.25" rx="3.5" ry="3.5" style="stroke:#4477AA;stroke-width:1.0;" width="383" x="47" y="342.2886"/><rect fill="#FFFFFF" height="10" style="stroke:#4477AA;stroke-width:1.0;" width="15" x="410" y="347.2886"/><rect fill="#FFFFFF" height="2" style="stroke:#4477AA;stroke-width:1.0;" width="4" x="408" y="349.2886"/><rect fill="#FFFFFF" height="2" style="stroke:#4477AA;stroke-width:1.0;" width="4" x="408" y="353.2886"/><text fill="#000000" font-family="Arial" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="86" x="195.5" y="368.4205">Envoy Proxy</text></g><!--cluster OPAPodNode--><g id="cluster_OPAPodNode"><polygon fill="#DDEEFF" points="470,661.4886,480,651.4886,723,651.4886,723,1110.6386,713,1120.6386,470,1120.6386,470,661.4886" style="stroke:#4477AA;stroke-width:1.0;"/><line style="stroke:#4477AA;stroke-width:1.0;" x1="713" x2="723" y1="661.4886" y2="651.4886"/><line style="stroke:#4477AA;stroke-width:1.0;" x1="470" x2="713" y1="661.4886" y2="661.4886"/><line style="stroke:#4477AA;stroke-width:1.0;" x1="713" x2="713" y1="661.4886" y2="1120.6386"/><text fill="#000000" font-family="Arial" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="61" x="562" y="677.6205">OPA Pod</text></g><!--cluster OPA--><g id="cluster_OPA"><rect fill="#FFFFFF" height="347.15" rx="3.5" ry="3.5" style="stroke:#4477AA;stroke-width:1.0;" width="165" x="508.83" y="749.4886"/><rect fill="#FFFFFF" height="10" style="stroke:#4477AA;stroke-width:1.0;" width="15" x="653.83" y="754.4886"/><rect fill="#FFFFFF" height="2" style="stroke:#4477AA;stroke-width:1.0;" width="4" x="651.83" y="756.4886"/><rect fill="#FFFFFF" height="2" style="stroke:#4477AA;stroke-width:1.0;" width="4" x="651.83" y="760.4886"/><text fill="#000000" font-family="Arial" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="82" x="550.33" y="775.6205">OPA Engine</text></g><!--cluster EchoPodNode--><g id="cluster_EchoPodNode"><polygon fill="#DDEEFF" points="204,862.5386,214,852.5386,393,852.5386,393,1086.0886,383,1096.0886,204,1096.0886,204,862.5386" style="stroke:#4477AA;stroke-width:1.0;"/><line style="stroke:#4477AA;stroke-width:1.0;" x1="383" x2="393" y1="862.5386" y2="852.5386"/><line style="stroke:#4477AA;stroke-width:1.0;" x1="204" x2="383" y1="862.5386" y2="862.5386"/><line style="stroke:#4477AA;stroke-width:1.0;" x1="383" x2="383" y1="862.5386" y2="1096.0886"/><text fill="#000000" font-family="Arial" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="113" x="238" y="878.6705">Echo Server Pod</text></g><!--cluster Echo--><g id="cluster_Echo"><rect fill="#FFFFFF" height="137.55" rx="3.5" ry="3.5" style="stroke:#4477AA;stroke-width:1.0;" width="92" x="276.6875" y="942.5386"/><rect fill="#FFFFFF" height="10" style="stroke:#4477AA;stroke-width:1.0;" width="15" x="348.6875" y="947.5386"/><rect fill="#FFFFFF" height="2" style="stroke:#4477AA;stroke-width:1.0;" width="4" x="346.6875" y="949.5386"/><rect fill="#FFFFFF" height="2" style="stroke:#4477AA;stroke-width:1.0;" width="4" x="346.6875" y="953.5386"/><text fill="#000000" font-family="Arial" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="82" x="281.6875" y="968.6705">Echo Server</text></g><!--entity Client--><g id="elem_Client"><ellipse cx="266" cy="106.5986" fill="#454645" rx="8" ry="8" style="stroke:#454645;stroke-width:0.5;"/><path d="M266,114.5986 L266,141.5986 M253,122.5986 L279,122.5986 M266,141.5986 L253,156.5986 M266,141.5986 L279,156.5986 " fill="none" style="stroke:#454645;stroke-width:0.5;"/><text fill="#454645" font-family="Arial" font-size="14" lengthAdjust="spacing" textLength="36" x="239.5" y="171.2305">Client</text><text fill="#454645" font-family="Arial" font-size="14" lengthAdjust="spacing" textLength="53" x="239.5" y="187.3291">Request</text></g><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacing" textLength="83" x="219.33" y="321.3218">8080 (HTTP)</text><rect fill="#F1F1F1" height="12" style="stroke:#181818;stroke-width:1.5;" width="12" x="254.83" y="336.2886"/><!--entity HCM--><g id="elem_HCM"><rect fill="#FFFFFF" height="46.0986" rx="3.5" ry="3.5" style="stroke:#4477AA;stroke-width:0.5;" width="214" x="63" y="421.2886"/><rect fill="#FFFFFF" height="10" style="stroke:#4477AA;stroke-width:0.5;" width="15" x="257" y="426.2886"/><rect fill="#FFFFFF" height="2" style="stroke:#4477AA;stroke-width:0.5;" width="4" x="255" y="428.2886"/><rect fill="#FFFFFF" height="2" style="stroke:#4477AA;stroke-width:0.5;" width="4" x="255" y="432.2886"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacing" textLength="174" x="78" y="454.4205">HTTP Connection Manager</text></g><!--entity ExtAuthz--><g id="elem_ExtAuthz"><rect fill="#FFFFFF" height="46.0986" rx="3.5" ry="3.5" style="stroke:#4477AA;stroke-width:0.5;" width="132" x="194" y="543.3886"/><rect fill="#FFFFFF" height="10" style="stroke:#4477AA;stroke-width:0.5;" width="15" x="306" y="548.3886"/><rect fill="#FFFFFF" height="2" style="stroke:#4477AA;stroke-width:0.5;" width="4" x="304" y="550.3886"/><rect fill="#FFFFFF" height="2" style="stroke:#4477AA;stroke-width:0.5;" width="4" x="304" y="554.3886"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacing" textLength="92" x="209" y="576.5205">ExtAuthz Filter</text></g><!--entity Router--><g id="elem_Router"><rect fill="#FFFFFF" height="46.0986" rx="3.5" ry="3.5" style="stroke:#4477AA;stroke-width:0.5;" width="119" x="266.5" y="726.4386"/><rect fill="#FFFFFF" height="10" style="stroke:#4477AA;stroke-width:0.5;" width="15" x="365.5" y="731.4386"/><rect fill="#FFFFFF" height="2" style="stroke:#4477AA;stroke-width:0.5;" width="4" x="363.5" y="733.4386"/><rect fill="#FFFFFF" height="2" style="stroke:#4477AA;stroke-width:0.5;" width="4" x="363.5" y="737.4386"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacing" textLength="79" x="281.5" y="759.5705">Router Filter</text></g><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacing" textLength="83" x="485.33" y="728.5218">9191 (gRPC)</text><rect fill="#F1F1F1" height="12" style="stroke:#181818;stroke-width:1.5;" width="12" x="520.83" y="743.4886"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacing" textLength="83" x="614.33" y="728.5218">8181 (HTTP)</text><rect fill="#F1F1F1" height="12" style="stroke:#181818;stroke-width:1.5;" width="12" x="649.83" y="743.4886"/><!--entity Rego--><g id="elem_Rego"><path d="M546.5,1040.0386 L546.5,1069.1373 A3.5,3.5 0 0 0 550,1072.6373 L638,1072.6373 A3.5,3.5 0 0 0 641.5,1069.1373 L641.5,1046.5386 L631.5,1036.5386 L550,1036.5386 A3.5,3.5 0 0 0 546.5,1040.0386 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><path d="M631.5,1036.5386 L631.5,1043.0386 A3.5,3.5 0 0 0 635,1046.5386 L641.5,1046.5386 " fill="#F1F1F1" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacing" textLength="75" x="556.5" y="1059.6705">Rego Policy</text></g><text fill="#000000" font-family="Arial" font-size="14" lengthAdjust="spacing" textLength="67" x="262" y="921.5718">80 (HTTP)</text><rect fill="#F1F1F1" height="12" style="stroke:#181818;stroke-width:1.5;" width="12" x="289.5" y="936.5386"/><!--link HCM to ExtAuthz--><g id="link_HCM_ExtAuthz"><path d="M186.72,467.6486 C202.88,489.2186 223.6425,516.9168 239.7725,538.4468 " fill="none" id="HCM-to-ExtAuthz" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="#454645" points="243.37,543.2486,241.175,533.6475,240.3721,539.2471,234.7725,538.4442,243.37,543.2486" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="43" x="221.39" y="510.5825">Internal</text></g><!--link ExtAuthz to Router--><g id="link_ExtAuthz_Router"><path d="M255.51,589.9086 C253.68,603.3786 252.84,620.6886 257,635.4886 C266.71,670.0086 286.5189,699.6883 303.3889,721.3083 " fill="none" id="ExtAuthz-to-Router" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="#454645" points="307.08,726.0386,304.697,716.4824,304.0041,722.0967,298.3899,721.4038,307.08,726.0386" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="57" x="258" y="632.6825">If Allowed</text></g><!--link OPA to Rego--><g id="link_OPA_Rego"><path d="M595.84,952.1786 C595.52,970.2186 594.8579,1006.1996 594.4279,1030.1096 " fill="none" id="OPA-to-Rego" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="#454645" points="594.32,1036.1086,598.4812,1027.182,594.4099,1031.1094,590.4825,1027.0382,594.32,1036.1086" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="58" x="596.12" y="1003.7325">Evaluates</text></g><!--link Client to P_Envoy--><g id="link_Client_P_Envoy"><path d="M266,190.6786 C266,240.6886 266,310.5986 266,330.4186 " fill="none" id="Client-to-P_Envoy" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="#454645" points="266,336.4186,270,327.4186,266,331.4186,262,327.4186,266,336.4186" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="Arial" font-size="13" lengthAdjust="spacing" textLength="86" x="267" y="233.4825">HTTP Request</text></g><!--link P_Envoy to HCM--><g id="link_P_Envoy_HCM"><path d="M261.37,348.1186 C248.94,361.0786 218.3637,392.9389 195.4837,416.7889 " fill="none" id="P_Envoy-to-HCM" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="#454645" points="191.33,421.1186,200.447,417.3931,194.7914,417.5105,194.674,411.8549,191.33,421.1186" style="stroke:#454645;stroke-width:1.0;"/></g><!--link ExtAuthz to P_OPA_gRPC--><g id="link_ExtAuthz_P_OPA_gRPC"><path d="M284.31,589.7786 C302.81,605.3786 329.67,625.1886 357,635.4886 C387.54,646.9986 400.68,629.1586 430,643.4886 C479.78,667.8186 515.5914,721.7412 526.0714,738.7412 " fill="none" id="ExtAuthz-to-P_OPA_gRPC" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="#454645" points="529.22,743.8486,527.9021,734.0884,526.5962,739.5924,521.0921,738.2865,529.22,743.8486" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="Arial" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="150" x="358" y="632.6825">1. CheckRequest (gRPC)</text></g><!--link P_OPA_gRPC to OPA--><g id="link_P_OPA_gRPC_OPA"><path d="M533.58,755.2086 C542.01,780.3786 579.795,893.1591 591.085,926.8791 " fill="none" id="P_OPA_gRPC-to-OPA" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="#454645" points="592.99,932.5686,593.9256,922.7643,591.4025,927.8273,586.3395,925.3043,592.99,932.5686" style="stroke:#454645;stroke-width:1.0;"/></g><!--link Router to P_Echo--><g id="link_Router_P_Echo"><path d="M322.73,772.7786 C316.24,817.0786 302.9322,907.9324 299.5822,930.7324 " fill="none" id="Router-to-P_Echo" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="#454645" points="298.71,936.6686,303.9758,928.3457,299.4368,931.7217,296.0608,927.1828,298.71,936.6686" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="Arial" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="154" x="316.33" y="833.7325">2. Upstream (Authorized)</text></g><!--link Router to P_OPA_HTTP--><g id="link_Router_P_OPA_HTTP"><path d="M351.93,726.0986 C381.77,700.9086 433.44,662.3786 486,646.9786 C525.67,635.3686 541.75,629.0786 579,646.9786 C622.75,668.0086 648.065,719.5073 656.145,738.0673 " fill="none" id="Router-to-P_OPA_HTTP" style="stroke:#454645;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#454645" points="658.54,743.5686,658.6151,733.7201,656.5442,738.9842,651.28,736.9133,658.54,743.5686" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="Arial" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="113" x="517.5" y="632.6825">(Optional) /v1/data</text></g><!--SRC=[fPLTRjD04CVVVOh1F906DIMbIZyaAWMJgWYrZK9vGweszjXPrTqDwtNQ5FKC7807n2su5Ho1cVNQTVhn04qKnRl-xVndPlzhFxCpl42mUXa4LjeSOQGMUWaluMGyX65fPzh8Qs6bLZ3M4GnDF9CMOriQX3y_ll_y_UjR41JdKis54HSm5V5vPdIfabZdsi3pT9k-QOj8C1LbRW-qiiU2fCEXaI8FMuJI2SBN0E2jDWcQg0gqjRMzBGJFDXB-Jf8WaiHDAqIiB-PQeRB_4YTrdvKuKbaqgOWVo6Smc4u7WuVYS3Q852Tu0M_-znEandNdGpb5ez1Y0L5U5fHE2A80dlPZIeso4B4bxIYNN3G1ONNvMKtmIuc53HbodGsh7Hxhn4Lo8neSrrs7LlTgrkYhvItjCO2vDiJilDfv1Pt3qzFnccF6PuxoJ2iO8n1ffSW_RAWZeKJc2pgCZkul65rPjk0r7CYyhhoUkqzFTCdjQB7LZ2Vz7md1-lf-4mVsu3tliXAv9vexZFcW1AKmp7DzYOd3RWB-DJtbqr9tbAuVxITp8vL9XJLwfvcx_Tq-TBB9EAgRISmPZrTxtj_fh_QSCHvxB9LqbiC9PfhoocLSRH-FLzl16Qmd-b9nhKplmMWXybAGunugT1JFD7n4iw2cD1QYkSSTTBkWWUyPw8vz25dLVif1ujMdHgIfZE60Dl39uLo0Vgy-R5P3xNS_mxxnXu3QwLplJo4nzGs6sFGkscRlphEM4_Ks2DgED3ARMHU-jWKfTBkSpGpZSo_ZLtQxJgyXMP86bUJh7doQ5zOWFUROv59bDE_jNZkYsWidiTdYEtMoc5GYBk9M3zv9GsUxUdV4CHO5T4xcN938wTLGO09KsrANndbjxLQmvmhhxRUCx5IRvMkmiUXl9CAAIl3cBm00]--></g></svg>